<launch>
  <node name="scans_merger" pkg="obstacle_detector" type="scans_merger_node" output="screen">
    <param name="active"            value="true"/>
    <param name="publish_scan"      value="false"/> <param name="publish_pcl"       value="true"/>

    <param name="fixed_frame_id"    value="odom"/>      <param name="target_frame_id"   value="base_link"/> <param name="min_scanner_range" value="0.1"/> 
    <param name="max_scanner_range" value="10.0"/>

    <remap from="front_scan" to="/front/scan"/>
  </node>

  <node name="obstacle_extractor" pkg="obstacle_detector" type="obstacle_extractor_node" output="screen">
    <param name="active"               value="true"/>
    <param name="use_scan"             value="false"/>
    <param name="use_pcl"              value="true"/> <param name="transform_coordinates"  value="true"/> 
    <param name="frame_id"               value="odom"/> 

    <param name="use_split_and_merge"    value="true"/>
    <param name="circles_from_visibles"  value="true"/>
    <param name="discard_converted_segments" value="true"/>
    
    <param name="min_group_points"     value="5"/>
    <param name="max_group_distance"   value="0.1"/>
    <param name="distance_proportion"  value="0.00628"/>
    <param name="max_split_distance"   value="0.1"/>   
    <param name="max_circle_radius"    value="0.65"/>  <param name="radius_enlargement"   value="0.1"/>
	
    <param name="min_x_limit" value="-20.0"/>
    <param name="max_x_limit" value="20.0"/>
    <param name="min_y_limit" value="-20.0"/>
    <param name="max_y_limit" value="20.0"/>
  </node>

  <node name="obstacle_tracker" pkg="obstacle_detector" type="obstacle_tracker_node" output="screen">
    <param name="active"                  value="true"/>
    <param name="frame_id"                value="odom"/> <param name="loop_rate"               value="100.0"/>
    <param name="tracking_duration"       value="2.0"/>  <param name="process_variance"        value="0.5"/>  <param name="measurement_variance"    value="0.1"/>  <remap from="tracked_obstacles" to="/obstacles"/>
  </node>

  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find obstacle_detector)/resources/jackal_obs_tracker.rviz"/>

</launch>
